<% content_for :header do %>
  <h3></h3>
  <div class="header-actions">
    <%= link_to 'All Stories', stories_path, class: 'header-action', data: {'turbo-action': 'restore'} %>
  </div>
<% end %>
<div class="top">
  <div class="stats">
    <h3 class="title">
      <turbo-frame id="story_title">
        <a href="<%= edit_story_path(@story)%>"><%= @story.title %></a>
      </turbo-frame>
    </h3>
    <div>Word Count Total: <%= @word_count_total %></div>
    <div>Writing Sessions: <%= @story.writing_sessions.count%></div>
  </div>
  <%= link_to 'New Session', new_story_writing_session_path(@story), class: 'primary-link button-link' %>
</div>
<h4>Previous Sessions</h4>
<div class="sessions-table-container" >
  <dl class="sessions-table">
    <% @story.writing_sessions.order(created_at: :desc).each do |session| %>
      <dd class="session">
        <div class="content">
          <div class="text-column"><%= render partial: 'writing_sessions/text', locals: {text: session.text} %></div>
          <div class="word-count"><%= session.word_count %></div>
        </div>
        <div class="actions">
          <%= link_to 'Resume', edit_story_writing_session_path(@story, session), class: 'action-link' %>
          <%= link_to 'Destroy', story_writing_session_path(@story,session), method: :delete, class: 'action-link', data: {confirm: 'Are you sure you want to delete this?'} %>
        </div>
      </dd>
    <% end %>
  </dl>
</div>
